<body>
  <app-navbar></app-navbar>

  <div class="container">
    <div class="row">
      <!-- Left Side: Video -->
      <div class="col-md-6 video-container">
        <img src="assets/img/login.avif" class="login-img" alt="Login Illustration">
      </div>

      <!-- Right Side: Login Form -->
      <div class="col-md-6 login-container">
        <div class="form-container shadow">
          <div class="form-heading">
            <h2>Create a New Group</h2>
          </div>

          <!-- Group Name -->
        <mat-form-field appearance="outline" class="full-width mat-field-styled">
  <mat-label><b>Group Name</b></mat-label>
  <input matInput id="group-name" [(ngModel)]="groupName" placeholder="Enter group name" />
</mat-form-field>

          <hr *ngIf="groupName" />

          <!-- Group Members -->
         <!-- Group Members -->
<div class="group-members" *ngIf="groupName">
  <h3>Group Members</h3>
  <mat-chip-list #chipList aria-label="Group members">
    <mat-chip *ngFor="let member of members; let i = index" (removed)="removeMember(i)">
      {{ member.username ? member.username : member.email }}
      <mat-icon matChipRemove>cancel</mat-icon>
    </mat-chip>
  </mat-chip-list>

  <div class="input-with-button">
    <input
      matInput
      placeholder="Search or add member"
      [(ngModel)]="searchQuery"
      (input)="onSearchUsername()"
      [matAutocomplete]="auto"
    />
    <button mat-raised-button color="primary" class="add-member-btn" (click)="addNonExistentUser()">
      Add
    </button>
  </div>

  <mat-autocomplete
    #auto="matAutocomplete"
    (optionSelected)="selectMember($event.option.value)"
  >
    <mat-option *ngFor="let result of searchResults" [value]="result">
      {{ result.username }} ({{ result.email }})
    </mat-option>
  </mat-autocomplete>
</div>


          <hr *ngIf="groupName" />

          <!-- Group Type -->
          <div class="group-type" *ngIf="groupName">
            <h3>Group Type</h3>
            <div class="group-type-dropdown">
              <select [(ngModel)]="groupType" class="form-select">
                <option>Home</option>
                <option>Office</option>
                <option>Trip</option>
                <option>Event</option>
                <option>Family</option>
                <option>Friends</option>
                <option>Workshop</option>
                <option>Conference</option>
                <option>Meeting</option>
                <option>Club</option>
                <option>Team</option>
                <option>Other</option>
              </select>
            </div>
          </div>

          <hr *ngIf="groupName" />

          <!-- Save Button -->
          <div class="save-button">
            <button
              class="save-btn"
              [disabled]="!groupName || members.length === 0"
              (click)="saveGroup()"
            >
              Save
            </button>
          </div>
        </div>
      </div>

    </div>
    
  </div>         
</body>

<app-modal
  [isVisible]="showModal"
  [title]="modalTitle"
  [message]="modalMessage"
  (close)="showModal = false"
></app-modal>


