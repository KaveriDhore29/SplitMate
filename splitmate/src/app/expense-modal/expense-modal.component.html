<div class="container">
  
<div class="popup">
  <h2 class="form-heading">Add Expense</h2>
  <form>
    <!-- Expense Title -->
    <div class="expense-title">
      <label for="label" class="label">Expense Title: </label>
      <input id="title" [(ngModel)]="expense.title" name="title" placeholder="Expense Title"/>
    </div>

    <!-- Currency Dropdown -->
    <div class="currency">
      <label for="currency">Currency:</label>
      <select
        id="currency"
        [(ngModel)]="expense.currency"
        name="currency"
    
      >
        <option *ngFor="let currency of currencyOptions" [value]="currency">
          {{ currency }}
        </option>
      </select>
      <label for="amount">Amount:</label>
      <input
        id="amount"
        type="number"
        [(ngModel)]="expense.amount"
        name="amount"
      
      />
    </div>

  <!-- Payer Dropdown -->
<div class="payer">
  <label for="payer">Payer:</label>
  <select
    id="payer"
    [(ngModel)]="expense.paidBy"
    name="payer"
  >
    <option *ngFor="let member of membersNames" [value]="member.email">
      {{ member.name }}
    </option>
  </select>
</div>



    <div class="split-options">
      <span>Split Options: </span>
      <button (click)="onSplitOptionChange('equally')">Equally</button>
  <button (click)="onSplitOptionChange('percentage')">Percentage</button>
  <button (click)="onSplitOptionChange('shares')">Shares</button>
  <button (click)="onSplitOptionChange('adjustments')">Adjustments</button>
    </div>

   

    <!-- Save and Cancel Buttons -->
    <button type="button" (click)="addExpenseData()">Save</button>
    <button type="button" (click)="close()">Cancel</button>
  </form>
</div>


<!-- Members Split Options -->
<div class="members-split-options" *ngIf="selectedSplitOption">
  <button class="close-btn" (click)="closeSplitOptions()">&#10006;</button> <!-- Close button -->

  <!-- Select All Checkbox -->
  <div *ngIf="selectedSplitOption === 'equally'">
    <label>
      <input type="checkbox" [checked]="isAllSelected()" (change)="toggleSelectAll($event)" />
      Select All
    </label>

    <div *ngFor="let member of membersNames">
      <label>
        <input type="checkbox" [checked]="expense.selectedMembers.includes(member.email)" 
               (change)="toggleMemberSelection(member.email, $event)" />
        {{ member.name }} ({{ member.email }})
      </label>
    </div>
  </div>

  <div *ngIf="selectedSplitOption === 'percentage'">
    <label *ngFor="let member of membersNames">
      <div>{{ member.name }} ({{ member.email }})</div>
      <input type="number" [(ngModel)]="memberPercentages[member.email]" min="0" max="100" placeholder="Enter Percentage" />
    </label>
  </div>

  <div *ngIf="selectedSplitOption === 'shares'">
    <label *ngFor="let member of membersNames">
      <div>{{ member.name }} ({{ member.email }})</div>
      <input type="number" [(ngModel)]="memberShares[member.email]" min="0" placeholder="Enter Shares" />
    </label>
  </div>

  <div *ngIf="selectedSplitOption === 'adjustments'">
    <!-- Add adjustment-related fields here if needed -->
    <div>Adjustment fields go here</div>
  </div>
</div>

  </div>






    <!-- Equally Checkbox -->
    <!-- <div>
      <label for="equally">Split Equally:</label>
      <input
        id="equally"
        type="checkbox"
        [(ngModel)]="expense.equally"
        name="equally"
        (change)="toggleEqually()"
      />
    </div> -->




   <!-- Checklist for Members -->
    <!-- <div *ngIf="!expense.equally">
      <label>Members:</label>
      <div *ngFor="let member of membersNames">
        <input
          type="checkbox"
          [id]="member.email"
          [checked]="expense.selectedMembers.includes(member.email)"
          (change)="toggleMemberSelection(member.email, $event)"
        />
        <label [for]="member.email">{{ member.name }}</label>
      </div>
    </div> -->